{% extends "base_visualizacion.html" %}
{% block title %}Self-Training{% endblock %}
{% block estadisticas %}
    <div class="accordion" style="overflow-y: auto; max-height: 75vh; width: 100%" id="acordeon">
        <div class="accordion-item">
            <h2 class="accordion-header" id="primera">
                <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#precision" aria-expanded="true" aria-controls="precision">
                    Precisión
                </button>
            </h2>
            <div id="precision" class="accordion-collapse collapse show" aria-labelledby="primera"></div>
        </div>
        <div class="accordion-item">
            <h2 class="accordion-header" id="segunda">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#accuracy" aria-expanded="false" aria-controls="accuracy">
                    Exactitud (accuracy)
                </button>
            </h2>
            <div id="accuracy" class="accordion-collapse collapse" aria-labelledby="segunda"></div>
        </div>
        <div class="accordion-item">
            <h2 class="accordion-header" id="tercera">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#error" aria-expanded="false" aria-controls="error">
                    Error
                </button>
            </h2>
            <div id="error" class="accordion-collapse collapse" aria-labelledby="tercera"></div>
        </div>
        <div class="accordion-item">
            <h2 class="accordion-header" id="cuarta">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#f1_score" aria-expanded="false" aria-controls="f1_score">
                    F1-Score
                </button>
            </h2>
            <div id="f1_score" class="accordion-collapse collapse" aria-labelledby="cuarta"></div>
        </div>
        <div class="accordion-item">
            <h2 class="accordion-header" id="quinta">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#recall" aria-expanded="false" aria-controls="recall">
                    Recall
                </button>
            </h2>
            <div id="recall" class="accordion-collapse collapse" aria-labelledby="quinta"></div>
        </div>
    </div>
{% endblock %}
{% block scripts %}
    <script type="text/javascript" src="/static/grafico_selftraining.js"></script>
    <script>
        let elementos = [
            { nombre: "clasificador", valor: "{{ clasificador }}" },
            { nombre: "n", valor: {{ n }} },
            { nombre: "th", valor: {{ th }} },
            { nombre: "n_iter", valor: {{ n_iter }} },
            { nombre: "target", valor: "{{ target }}" },
            { nombre: "cx", valor: "{{ cx }}" },
            { nombre: "cy", valor: "{{ cy }}" },
            { nombre: "pca", valor: "{{ pca }}"},
            { nombre: "no_etiquetados", valor: "{{ no_etiquetados }}" },
            { nombre: "p_unlabelled", valor: {{ p_unlabelled }} },
            { nombre: "p_test", valor: "{{ p_test }}" }
        ];
        let cx = "{{ cx }}", cy = "{{ cy }}";
        inicializar("/{{ session['ALGORITMO'] }}d", elementos).then(function (datos) {
            inicializarGrafico(datos, preparardataset,databinding);
            estadisticagenerica(datos, "precision", "Precisión");
            estadisticagenerica(datos, "accuracy", "Accuracy");
            estadisticagenerica(datos, "error", "Error");
            estadisticagenerica(datos, "f1_score", "F1-Score");
            estadisticagenerica(datos, "recall", "Recall");
        });

    </script>
{% endblock %}