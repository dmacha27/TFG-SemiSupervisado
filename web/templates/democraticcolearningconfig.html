{% extends "base_configuracion.html" %}
{%  from "macros.html" import selector %}
{% block parametros %}
    <div class="mb-3">
        {{ selector("clasificador1", clasificadores) }}
    </div>
    <div class="parametros" id="parametros1"></div>
    <br>
    <div class="mb-3">
        {{ selector("clasificador2", clasificadores) }}
    </div>
    <div class="parametros" id="parametros2"></div>
    <br>
    <div class="mb-3">
        {{ selector("clasificador3", clasificadores) }}
    </div>
    <div class="parametros" id="parametros3"></div>
    <br>
{% endblock %}
{% block form_scripts %}
    <script>
        const clasificador1 = document.querySelector('#clasificador1');
        const clasificador2 = document.querySelector('#clasificador2');
        const clasificador3 = document.querySelector('#clasificador3');

        const div_parametros1 = document.querySelector('#parametros1');
        const div_parametros2 = document.querySelector('#parametros2');
        const div_parametros3 = document.querySelector('#parametros3');

        const todos_parametros = {{ parametros|tojson }};

        clasificador1.addEventListener('change', (event) => {
            generarFormParametros(event.target.value, div_parametros1, "clasificador1");
        });

        clasificador2.addEventListener('change', (event) => {
            generarFormParametros(event.target.value, div_parametros2, "clasificador2");
        });

        clasificador3.addEventListener('change', (event) => {
            generarFormParametros(event.target.value, div_parametros3, "clasificador3");
        });

        generarFormParametros(clasificador1.value, div_parametros1, "clasificador1");
        generarFormParametros(clasificador2.value, div_parametros2, "clasificador2");
        generarFormParametros(clasificador3.value, div_parametros3, "clasificador3");
    </script>
{% endblock %}
{% block explicaciones %}
    <p>Democratic Co-Learning es un algoritmo de aprendizaje semi-supervisado en la línea de Co-Training
        (varios clasificadores). La diferencia sustancial es que no trabajan con dos (o
        más) conjunto de atributos (para que cada clasificador utilice uno de ellos),
        en este caso solo se tiene un único conjunto de atributos («single-view»).

        Partiendo de los datos etiquetados, varios clasificadores realizan votación
        ponderada sobre los no etiquetados. Lo que quiere decir que, para una
        instancia, su nueva etiqueta será la que vote la mayoría. Además, para
        aquellos clasificadores que no votan como la mayoría, la instancia se añade a
        su conjunto de entrenamiento junto a la etiqueta mayoritaria, de esta forma
        se «obliga» en la siguiente iteración a aprenderla. Todo el proceso se repite
        hasta que no se añadan más instancias a ningún conjunto de entrenamiento,
        esto se alcanza cuando no se mejora la precisión pese a la adición de nuevas
        instancias pseudoetiquetadas.</p>

    <img src="/static/pseudocodigos/DemocraticCoLearningFit.png" width="75%" />
    <img src="/static/pseudocodigos/DemocraticCoLearningCombine.png" width="75%" />
{% endblock %}